<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dota 2 Counter Picker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #eee;
      text-align: center;
      margin: 0;
      padding: 20px;
    }
    h1 { color: #ffcc00; }
    .container {
      display: flex;
      justify-content: center;
      gap: 40px;
      flex-wrap: wrap;
      margin-bottom: 30px;
    }
    select {
      width: 180px;
      padding: 8px;
      background: #222;
      color: #fff;
      border: 1px solid #555;
      border-radius: 8px;
      margin: 5px 0;
    }
    button {
      padding: 10px 20px;
      background: #ffcc00;
      color: #000;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 20px;
    }
    button:hover {
      background: #ffaa00;
    }
    .results {
      margin-top: 30px;
      font-size: 1.2em;
    }
    .hero-card {
      display: inline-block;
      background: #222;
      border-radius: 10px;
      padding: 10px 20px;
      margin: 10px;
      box-shadow: 0 0 10px #000;
    }
  </style>
</head>
<body>
  <h1>Dota 2 Counter Picker</h1>
  <div class="container">
    <div>
      <h2>–ú–æ—è –∫–æ–º–∞–Ω–¥–∞ (4 –≥–µ—Ä–æ—ó)</h2>
      <div id="myTeam"></div>
    </div>
    <div>
      <h2>–ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ (5 –≥–µ—Ä–æ—ó–≤)</h2>
      <div id="enemyTeam"></div>
    </div>
  </div>

  <button id="goButton">Go</button>
  <div id="results" class="results"></div>

  <script>
    let heroes = [];
    let myTeamSelects = [];
    let enemyTeamSelects = [];

    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è heroes.json
    fetch('heroes.json')
      .then(res => res.json())
      .then(data => {
        heroes = data;
        createSelectors();
      });

    function createSelectors() {
      const myDiv = document.getElementById('myTeam');
      const enemyDiv = document.getElementById('enemyTeam');
      const heroNames = heroes.map(h => h.name);

      for (let i = 0; i < 4; i++) {
        const select = createHeroSelect(heroNames, `my${i}`);
        myDiv.appendChild(select);
        myTeamSelects.push(select);
      }

      for (let i = 0; i < 5; i++) {
        const select = createHeroSelect(heroNames, `enemy${i}`);
        enemyDiv.appendChild(select);
        enemyTeamSelects.push(select);
      }
    }

    function createHeroSelect(heroNames, id) {
      const select = document.createElement('select');
      select.id = id;
      const emptyOption = document.createElement('option');
      emptyOption.value = '';
      emptyOption.text = '‚Äî –û–±–µ—Ä–∏ –≥–µ—Ä–æ—è ‚Äî';
      select.appendChild(emptyOption);
      heroNames.forEach(name => {
        const option = document.createElement('option');
        option.value = name;
        option.text = name;
        select.appendChild(option);
      });
      return select;
    }

    document.getElementById('goButton').addEventListener('click', () => {
      const myHeroes = myTeamSelects.map(s => s.value).filter(Boolean);
      const enemyHeroes = enemyTeamSelects.map(s => s.value).filter(Boolean);

      if (myHeroes.length < 4 || enemyHeroes.length < 5) {
        alert("–í–∏–±–µ—Ä–∏ 4 –≥–µ—Ä–æ—ó–≤ —É —Å–≤–æ—é –∫–æ–º–∞–Ω–¥—É —ñ 5 —É –∫–æ–º–∞–Ω–¥—É –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞!");
        return;
      }

      const bestPicks = getBestCounters(myHeroes, enemyHeroes);
      showResults(bestPicks);
    });

    function getBestCounters(myHeroes, enemyHeroes) {
      const mySet = new Set(myHeroes);
      const counterScores = {};

      heroes.forEach(hero => {
        if (mySet.has(hero.name) || enemyHeroes.includes(hero.name)) return;

        let score = 0;
        enemyHeroes.forEach(enemy => {
          const enemyData = heroes.find(h => h.name === enemy);
          if (enemyData && enemyData.counters?.includes(hero.name)) score += 2;
          if (hero.counters?.includes(enemy)) score++;
        });
        counterScores[hero.name] = score;
      });

      return Object.entries(counterScores)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 3)
        .map(([name]) => name);
    }

    function showResults(bestPicks) {
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = "<h2>üîπ –ù–∞–π–∫—Ä–∞—â—ñ –≥–µ—Ä–æ—ó –¥–ª—è –ø—ñ–∫—É:</h2>";
      bestPicks.forEach(name => {
        const card = document.createElement('div');
        card.className = 'hero-card';
        card.textContent = name;
        resultsDiv.appendChild(card);
      });
    }
  </script>
</body>
</html>








