<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dota 2 Draft Helper</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Fira+Sans:wght@400;600&display=swap" rel="stylesheet">

<style>
  body {
    margin: 0;
    padding: 0;
    background: url('flags/LOGO11.png') no-repeat center center fixed;
    background-size: cover;
    font-family: 'Fira Sans', sans-serif;
    color: #fff;
    text-align: center;
  }

  h1 {
    font-family: 'Press Start 2P';
    font-size: 28px;
    color: #ff0000;
    text-shadow: 0 0 10px #ff0000, 0 0 20px #aa0000;
    margin: 20px 0;
  }

  h2 {
    font-family: 'Press Start 2P';
    font-size: 16px;
    margin: 10px 0;
    color: #fff;
    text-shadow: 0 0 5px #000;
  }

  .team-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }

  .team {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .team select, .team input {
    margin: 5px 0;
    padding: 8px;
    border-radius: 8px;
    border: none;
    width: 180px;
    text-align: center;
    font-family: 'Fira Sans';
    font-size: 14px;
  }

 button {
  background: linear-gradient(to bottom, #ffcc00, #cc9900);
  color: #000;
  border: 2px solid #000;
  padding: 12px 30px;
  border-radius: 8px;
  font-weight: bold;
  font-family: 'Fira Sans';
  box-shadow: 0 0 10px #ffcc00;
  transition: all 0.2s ease;
}

button:hover {
  background: linear-gradient(to bottom, #ffaa00, #cc7700);
  transform: scale(1.05);
  box-shadow: 0 0 15px #ffaa00;
}

#resultsGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 25px;
  justify-items: center;
  padding: 15px;
  margin-top: 20px;
}

.resultColumn {
  width: 100%;
  max-width: 280px;
  background: rgba(0,0,0,0.65);
  border-radius: 12px;
  padding: 12px;
  box-shadow: 0 0 10px #ffcc00;
  text-align: center;
}

.resultColumn h3 {
  margin-bottom: 8px;
  font-family: 'Press Start 2P';
  font-size: 14px;
  text-shadow: 0 0 5px #000;
}

.hero {
  background: #222;
  margin: 6px 0;
  padding: 8px 10px;
  border-radius: 10px;
  box-shadow: 0 0 6px #000;
  font-size: 13px;
}

  #stageTitle {
  font-family: 'Press Start 2P';
  font-size: 18px;
  color: #ffcc00;
  text-shadow: 0 0 10px #000, 0 0 5px #ff0000;
  margin-bottom: 15px;
}

  #teamsDisplay {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  max-width: 1000px;
  margin: 20px auto;
  gap: 20px;
}

#teamsDisplay .column {
  flex: 1;                /* —É—Å—ñ –æ–¥–Ω–∞–∫–æ–≤—ñ */
  min-width: 200px;       /* —â–æ–± –Ω–µ –ª–∞–º–∞–ª–∏—Å—å –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö */
  background: rgba(0,0,0,0.7);
  padding: 15px;
  border-radius: 12px;
  box-shadow: 0 0 10px #ffcc00;
  text-align: center;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

#teamsDisplay .column:hover {
  transform: scale(1.04);
  box-shadow: 0 0 15px #ffaa00;
}

#teamsDisplay h3 {
  font-family: 'Press Start 2P';
  font-size: 14px;
  margin-bottom: 10px;
  color: #ffcc00;
  text-shadow: 0 0 5px #000;
}

#teamsDisplay ul {
  list-style: none;
  padding: 0;
  margin: 0;
  font-size: 14px;
}
  #draftSummary {
    display: none;
    max-width: 900px;
    margin: 20px auto;
    padding: 20px;
    background: rgba(46,46,46,0.85);
    border-radius: 15px;
    text-align: center;
  }

  #summaryContainer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
  }

  #summaryMyTeam, #summaryEnemyTeam {
    list-style: none;
    padding: 0;
    width: 40%;
  }

  #summaryCenter {
    width: 20%;
  }

  #summaryBar {
    height: 20px;
    background: #ff0000;
    width: 0%;
    border-radius: 10px;
  }

  #controls {
    margin: 15px 0;
  }

  #controls input {
    margin-right: 5px;
  }

</style>
</head>

<body>
<h1>Dota 2 Draft Helper</h1>
  
<!-- üîπ –î–æ–¥–∞—î–º–æ –Ω–∞–ø–∏—Å —Å—Ç–∞–¥—ñ—ó -->
<h2 id="stageTitle">Stage 1</h2>  

<div id="selectorsContainer">


<div id="myTeam" class="team"></div>


<div id="enemyTeam" class="team"></div>

<button id="nextBtn">Go</button>

<div id="results"></div>

</div>
<div id="controls">
  <label>
    <input type="checkbox" id="behaviorMode">
    üé≠ –£–≤—ñ–º–∫–Ω—É—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫–æ–≤–∏–π —Ñ–∞–∫—Ç–æ—Ä
  </label>
</div>

  <div id="teamsDisplay">
  <div class="column">
    <h3>üü¶ –ú–æ—è –∫–æ–º–∞–Ω–¥–∞</h3>
    <ul id="myTeamList"></ul>
  </div>



  <div class="column">
    <h3>üü• –°—É–ø–µ—Ä–Ω–∏–∫–∏</h3>
    <ul id="enemyTeamList"></ul>
  </div>
</div>
  <div id="draftSummary" style="display:none;">
  <div id="summaryContainer" 
       style="display:flex; justify-content:space-between; align-items:center; 
              background:url('LOGO11.png') center/cover no-repeat; 
              padding:20px; border-radius:15px; color:#fff; margin:20px auto; max-width:900px;">
    <ul id="summaryMyTeam" style="list-style:none; padding:0; text-align:center;"></ul>
    <div id="summaryCenter" style="text-align:center;">
      <h2 id="summaryChance" style="margin-bottom:10px;"></h2>
      <div style="background:rgba(0,0,0,0.5); border-radius:10px; overflow:hidden; width:150px; height:20px; margin:0 auto;">
        <div id="summaryBar" style="background:#ff0000; width:0%; height:100%;"></div>
      </div>
      <p id="summaryBehavior" style="margin-top:10px;"></p>
    </div>
    <ul id="summaryEnemyTeam" style="list-style:none; padding:0; text-align:center;"></ul>
  </div>
</div>
<div id="behaviorInfo" style="display:none; margin-top:15px; color:#ff6666;"></div>




<script>
let stage = 1;
let allMyHeroes = [];
let allEnemyHeroes = [];
const stageLimits = [
  { my: 2, enemy: 2 },
  { my: 2, enemy: 2 },
  { my: 1, enemy: 1 }
];
let heroes = [];
let heroStats = [];

async function fetchHeroes() {
  try {
    const res = await fetch("https://api.opendota.com/api/heroStats");
    const data = await res.json();
    heroStats = data;
    heroes = data.map(h => ({ id: h.id, name: h.localized_name, roles: h.roles }));

    createSelectors();
    updateTeamDisplays();
    updateStageTitle();
  } catch (err) {
    console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≥–µ—Ä–æ—ó–≤:", err);
  }
}

function createSelectors() {
  const myTeamDiv = document.getElementById('myTeam');
  const enemyTeamDiv = document.getElementById('enemyTeam');

  myTeamDiv.innerHTML = "<h2>–ú–æ—è –∫–æ–º–∞–Ω–¥–∞</h2>";
  enemyTeamDiv.innerHTML = "<h2>–°—É–ø–µ—Ä–Ω–∏–∫</h2>";

  const limits = stageLimits[stage - 1];
  createTeamSelectors(myTeamDiv, limits.my, allMyHeroes);
  createTeamSelectors(enemyTeamDiv, limits.enemy, allEnemyHeroes);

  document.getElementById('nextBtn').onclick = nextStage;
}

function createTeamSelectors(container, count, saved = []) {
  const heroOptions = ['<option value="">–í–∏–±–µ—Ä–∏ –≥–µ—Ä–æ—è</option>']
    .concat(heroes.map(h => `<option value="${h.name}">${h.name}</option>`))
    .join('');

  for (let i = 0; i < count; i++) {
    const wrapper = document.createElement('div');
    const select = document.createElement('select');
    select.innerHTML = heroOptions;
    if (saved[i]) select.value = saved[i];

    select.addEventListener('change', updateTeamDisplays);

    wrapper.appendChild(select);
    container.appendChild(wrapper);
  }
}

function getSelectedHeroes(selector) {
  return Array.from(document.querySelectorAll(selector + ' select'))
    .map(s => s.value).filter(v => v !== '');
}

function updateTeamDisplays(currentOnly = true) {
  const myTeamList = document.getElementById('myTeamList');
  const enemyTeamList = document.getElementById('enemyTeamList');

  const myHeroes = currentOnly ? getSelectedHeroes('#myTeam') : allMyHeroes;
  const enemyHeroes = currentOnly ? getSelectedHeroes('#enemyTeam') : allEnemyHeroes;

  myTeamList.innerHTML = myHeroes.length
    ? myHeroes.map(h => `<li>üü© ${h}</li>`).join('')
    : '<li style="opacity:0.6;">(–ø–æ–∫–∏ –Ω–µ –≤–∏–±—Ä–∞–Ω–æ)</li>';

  enemyTeamList.innerHTML = enemyHeroes.length
    ? enemyHeroes.map(h => `<li>üü• ${h}</li>`).join('')
    : '<li style="opacity:0.6;">(–ø–æ–∫–∏ –Ω–µ –≤–∏–±—Ä–∞–Ω–æ)</li>';
}

function updateStageTitle() {
  const stageTitle = document.getElementById('stageTitle');
  stageTitle.textContent = `Stage ${stage}`;
}

function nextStage() {
  const mySelected = getSelectedHeroes('#myTeam');
  const enemySelected = getSelectedHeroes('#enemyTeam');
  const limits = stageLimits[stage - 1];

  if (mySelected.length < limits.my || enemySelected.length < limits.enemy) {
    alert(`‚ö†Ô∏è –û–±–µ—Ä–∏ ${limits.my} –≥–µ—Ä–æ—ó–≤ —É —Å–≤–æ—é –∫–æ–º–∞–Ω–¥—É —Ç–∞ ${limits.enemy} —É —Å—É–ø–µ—Ä–Ω–∏–∫–∞!`);
    return;
  }

  allMyHeroes.push(...mySelected);
  allEnemyHeroes.push(...enemySelected);

  if (stage < 3) {
    stage++;
    updateStageTitle();
    updateTeamDisplays(false);
    createSelectors();
  } else {
    alert("Draft –∑–∞–≤–µ—Ä—à–µ–Ω–æ!");
  }
}

document.addEventListener('DOMContentLoaded', () => {
  fetchHeroes();
});
</script>

</body>
</html>
